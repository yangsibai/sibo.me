// Generated by CoffeeScript 1.7.1
(function() {
  var dbConfig, dbHelper, _;

  dbHelper = require('mysql-dbhelper');

  dbConfig = require('../../config').dbConfig();

  _ = require('underscore');


  /*
      认证
   */

  exports.auth = function(email, password, cb) {
    var conn, sql;
    sql = "select id\nfrom user\nwhere email=?\nand password=?\nand state =0;";
    conn = dbHelper.createConnection(dbConfig);
    conn.connect();
    return conn.executeFirstRow(sql, [email, password], function(err, row) {
      conn.end();
      if (err) {
        return cb(err);
      } else if (row) {
        return cb(null);
      } else {
        return cb(new Error("fail"));
      }
    });
  };

}).call(this);

//# sourceMappingURL=dbUser.map
